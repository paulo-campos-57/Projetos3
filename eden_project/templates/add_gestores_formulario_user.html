{% extends 'base.html' %}
{% load static %}

{% block content %}

<body>

    {% include 'partial/_navbar.html'%}
    <div class="colaborador_texto_navbar_vertical">{{ perfil.user.username }}</div>

    <div class="formulario-user-imagem-contener">
        <img class="formulario-user-imagem" src="{% static 'assets/fotos/foto1.jpeg' %}" alt="{{ perfil.user.username }} Foto">
    </div>

    <div class="card-container-nome-add-gestor">
        <div class="card-background-nome-add-gestor"></div>
    
        <div class="card-text-nome-add-gestor" id="NomeUser">
            {{perfil.user.first_name}} {{perfil.user.last_name}}
        </div>
    
    </div>

    <div class="email-box-add-gestor" id="EmailUser">{{perfil.user.email}}</div>

    <div class="card-text-formulario">{{perfil.motivacao}}</div>

    <canvas id="graficoPizzaInteracoes" style="position: absolute; left: 618px; top: 451px; width: 152.19px; height: 152.19px;"></canvas>

   
    <canvas id="graficoPizzaHistorico" style="position: absolute; left: 618px; top: 674px; width: 152.19px; height: 152.19px;"></canvas>

    <div>
        
        
        <div class="retangle-button-addmit">
            Admitir
        </div>
       
    </div>

    <script>
        var nomeUser = document.getElementById('NomeUser');

        var numeroCaracteres = nomeUser.innerText.length;
        var tamanhoContaniner = (numeroCaracteres * 15) + 50;

        document.querySelector('.card-container-nome-add-gestor').style.width = tamanhoContaniner + 'px'; 

        var emailUser = document.getElementById('EmailUser');

        var numeroCaracteresEmail = nomeUser.innerText.length;
        var tamanhoContaninerEmail = (numeroCaracteres * 15) + 20;

        document.querySelector('.email-box-add-gestor').style.width = tamanhoContaninerEmail + 'px'; 

        window.onload = function() {
            var ctx1 = document.getElementById('graficoPizzaInteracoes').getContext('2d');
            var dadoInteracoes = {{ dados_interacoes|safe }};

            var chart = new Chart(ctx1, {
                type: 'pie',
                data: {
                    datasets: [{
                        data: [dadoInteracoes.numero1, dadoInteracoes.numero2],
                        backgroundColor: ['#058DA0', '#F8F8F8'],
                    }],
                },
                options: {
                    responsive: false
                }
            });

            var ctx2 = document.getElementById('graficoPizzaHistorico').getContext('2d');
            var dadosHistrico = {{ dados_histrico|safe }};

            var chart = new Chart(ctx2, {
                type: 'pie',
                data: {
                    datasets: [{
                        data: [dadosHistrico.numero1, dadosHistrico.numero2],
                        backgroundColor: ['#0ABAB5', '#1E4F56'],
                    }],
                },
                options: {
                    responsive: false
                }
            });
        }
    </script>
</body>
</html>
{% endblock %} 